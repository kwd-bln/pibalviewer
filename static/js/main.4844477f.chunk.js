(this.webpackJsonppibalviewer=this.webpackJsonppibalviewer||[]).push([[0],{75:function(e,t,n){e.exports=n(95)},86:function(e,t,n){e.exports=n.p+"static/media/fusen_fly_man.9c7e6cbd.png"},88:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){e.exports=n.p+"static/media/hsl.82c2cd72.png"},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),s=n(20),i=n(25),l=n(40),u=n(34),m=n(35),f=n(41),d=n(42),p=n(60),h=Object(p.actionCreatorFactory)(),b=h("REQUEST_LOGIN"),E=h("REQUEST_LOGOUT"),v=(h("INPUT_USER"),h("INPUT_PASS"),h("START_CREATE_TOKEN")),g=(h("FINISH_CREATE_TOKEN"),h("START_FETCH_DATES")),T=h("FINISH_FETCH_DATES"),O=h("SET_DATES"),k=h("START_FETCH_PIBALDATA"),x=h("ACTION_ENLARGE"),y=h("ACTION_SHRINK"),w=h("TOGGLE_VISIBLE"),j=h("SELECT_FLIGHT"),I=(h("GET_DATA_ERROR"),h("LOAD_DATA_ERROR"),h("FETCHED_DATA"),h("SET_WIND")),S=h("TOGGLE_ISTO"),N=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(m.a)(n,[{key:"render",value:function(){var e=localStorage.auth_token;return e&&!this.props.token&&this.props.setLocalStorageToken(e),this.props.token.length||e?r.a.createElement(i.b,{children:this.props.children}):r.a.createElement(i.a,{to:"/login"})}}]),n}(r.a.Component),L=Object(i.f)(Object(s.c)((function(e){return{token:e.state.token}}),(function(e){return{setLocalStorageToken:function(t){e(b(t))}}}))(N)),C=n(70),_=n(102),A=n(97),R=n(62),D=n(98),M=n(99),F=Object(s.c)((function(e){return{}}),(function(e){return{handleOnClickSubmitButton:function(t,n){e(v({username:t,password:n}))}}}))((function(e){var t=Object(C.a)(),a=t.register,c=t.handleSubmit,o=t.errors,s=t.reset;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:n(86),className:"login-image"}),r.a.createElement(_.a,{noValidate:!0,onSubmit:c((function(t){e.handleOnClickSubmitButton(t.username,t.password),s()}))},r.a.createElement(_.a.Group,{as:A.a,controlId:"username",className:"login-form"},r.a.createElement(_.a.Label,{column:!0,sm:3,xs:12},"\u30e6\u30fc\u30b6\u30fc\u540d"),r.a.createElement(R.a,{xs:{span:10,offset:1},sm:7},r.a.createElement(_.a.Control,{name:"username",placeholder:"username",type:"text",inputMode:"email",isInvalid:void 0!==o.username,ref:a({required:"\u5165\u529b\u304c\u5fc5\u8981\u3067\u3059\uff01"})}),o.username&&r.a.createElement(_.a.Control.Feedback,{type:"invalid"},o.username.message))),r.a.createElement(_.a.Group,{as:A.a,controlId:"password",className:"login-form"},r.a.createElement(_.a.Label,{column:!0,sm:3,xs:12},"\u30d1\u30b9\u30ef\u30fc\u30c9"),r.a.createElement(R.a,{xs:{span:10,offset:1},sm:7},r.a.createElement(_.a.Control,{name:"password",placeholder:"password",type:"password",isInvalid:void 0!==o.password,ref:a({required:"\u5165\u529b\u304c\u5fc5\u8981\u3067\u3059\uff01"})})),o.password&&r.a.createElement(_.a.Control.Feedback,{type:"invalid"},o.password.message)),r.a.createElement(_.a.Group,null,r.a.createElement(R.a,{sm:5},r.a.createElement(D.a,null,r.a.createElement(M.a,{variant:"primary",type:"submit",className:"login-button"},"\u30ed\u30b0\u30a4\u30f3"))))))})),P=n(22),H=Object(P.a)(),G=(n(88),n(89),n(13)),B=n(69),U=function(e){var t=e.dateInfoList.map((function(e,t){return{value:t,label:"".concat(te(e.date)," - ").concat(e.timePeriod)}}));return t.length?r.a.createElement("div",{className:"select-dates-div"},r.a.createElement(B.a,{options:t,defaultValue:t[0],className:"dates-select",onChange:function(t){var n=t.value;e.onChange(n)},theme:function(e){return Object(G.a)({},e,{borderRadius:4,colors:Object(G.a)({},e.colors,{primary70:"skyblue",primary:"skyblue"})})}})):r.a.createElement("p",null,"nodata")};var K=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){var n=[];e.windInfoList.forEach((function(e){var t=[],a=0,r=0;e.winds.forEach((function(e){var n=e.deg*(Math.PI/180);a+=30.8667*e.spd*Math.sin(n),r+=30.8667*e.spd*Math.cos(n),t.push({x:a,y:r})})),n.push({hours:e.hours,minutes:e.minutes,visible:e.visible,points:t})}));var a=function(e){var t=function(e,t){return Math.max(e,t)};return e.map((function(e){return e.points.map((function(e){return Math.hypot(e.x,e.y)})).reduce(t)})).reduce(t,1)}(n),r=function(){var e=t.current;return e.width=480,e.height=480,e.getContext("2d")}(),c=function(e,t){var n=Math.ceil(e/3.2/t);return Math.max(Number(n.toPrecision(2)),10)}(a,e.scaleRatio),o=48/c;r.save(),r.strokeStyle="#707070",r.fillStyle="#707070",r.beginPath(),r.moveTo(240,240),r.arc(240,240,2,0,2*Math.PI),r.fill();var s=t.current.width-50,i=t.current.height-50;r.beginPath(),r.moveTo(50,240),r.lineTo(s,240),r.moveTo(240,50),r.lineTo(240,i);r.moveTo(145,50),r.lineTo(335,i),r.moveTo(335,50),r.lineTo(145,i),r.moveTo(50,145),r.lineTo(s,335),r.moveTo(50,335),r.lineTo(s,145),r.stroke(),r.beginPath(),r.moveTo(240,240),r.arc(240,240,48,0,2*Math.PI),r.arc(240,240,96,0,2*Math.PI),r.arc(240,240,144,0,2*Math.PI),r.stroke(),r.beginPath();r.moveTo(.3*s,i),r.lineTo(.3*s,i+10),r.lineTo(.3*s+48,i+10),r.lineTo(.3*s+48,i),r.stroke(),r.restore(),r.save(),r.fillStyle="black",r.font="14px Arial",r.textAlign="center",r.fillText(c.toString()+"m",.3*s+24,i+25),r.restore();var l=n.length,u=Math.min(360/l,40);n.forEach((function(t,n){if(t.visible){var a=t.points,c=Math.ceil(u*(l-n-1)),s="hsl("+c+", 100%, 50%)",i="hsl("+c+", 80%, 45%)",m=240,f=240;a.forEach((function(t){r.save(),r.strokeStyle=s,r.fillStyle=i,r.beginPath(),r.moveTo(m,f),m=240+(e.isTo?-t.x*o:t.x*o),f=240-(e.isTo?-t.y*o:t.y*o),r.lineTo(m,f),r.stroke(),r.moveTo(m,f),r.arc(m,f,3,0,2*Math.PI),r.fill(),r.restore()}))}}))})),r.a.createElement("div",{className:"rect-wrap"},r.a.createElement("canvas",{className:"pibal-glaph",ref:t}))},Q=n(12);function z(e,t){return("00"+e).slice(-2)+":"+("00"+t).slice(-2)}var V=function(e){var t=e.windInfoList.length,n=Math.min(360/t,40);return r.a.createElement(R.a,{xs:{offset:2,span:10},sm:{offset:0,span:4}},r.a.createElement("div",{className:"button-wrap"},e.windInfoList.slice().reverse().map((function(a,c){var o={color:"white",backgroundColor:"hsla("+Math.ceil(n*c)+", 80%, 45%, 0.8)",textAlign:"center",borderRadius:"3px",margin:"0",top:"5%",position:"absolute",width:"80px"};return r.a.createElement(A.a,{key:"toggle-".concat(c)},r.a.createElement(R.a,{xs:{offset:1,span:4},sm:{offset:0,span:5}},r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"switch"},r.a.createElement("input",{type:"checkbox",className:"switch",id:"wind-".concat(c),checked:e.windInfoList[t-c-1].visible,onClick:function(n){e.onClickAt(t-c-1)},readOnly:!0}),r.a.createElement("label",{htmlFor:"wind-".concat(c)})))),r.a.createElement(R.a,{xs:{offset:1,span:6},sm:{offset:0,span:7}},r.a.createElement("p",{style:o},z(a.hours,a.minutes))))}))))},W=function(e){for(var t=Math.max.apply(Math,Object(Q.a)(e.windInfoList.map((function(e){return e.winds.length})))),n=e.windInfoList.length,a=e.windInfoList.length,c=Math.min(360/a,40),o=[],s=0;s<t;s++)o.unshift(r.a.createElement("div",{id:"cell",className:"altitude-cell",key:"cell-alt-row-".concat(s)},"".concat(100*(s+1))));o.unshift(r.a.createElement("div",{id:"cell",className:"altitude-cell",key:"cell-alt-row"},"Alt(m)"));for(var i=[],l=0;l<n;l++){for(var u=e.windInfoList[l],m=u.winds,f=[],d=0;d<t;d++)if(d<m.length){var p=m[d].deg,h=m[d].spd,b=Math.min(15,h),E=(.05*(15-b)+.9*b)/15,v={backgroundColor:"hsla(".concat(p,",50%,50%, ").concat(E,")")};f.unshift(r.a.createElement("div",{id:"cell",style:v,key:"cell-".concat(d,"-").concat(l)},r.a.createElement("div",{className:"small-left"},p),r.a.createElement("div",{className:"small-right"},h)))}else f.unshift(r.a.createElement("div",{id:"cell",key:"cell-".concat(d,"-").concat(l)},"x"));var g={color:"white",backgroundColor:"hsla("+Math.ceil(c*l)+", 80%, 50%, 0.8)"};f.unshift(r.a.createElement("div",{id:"cell",style:g,key:"cell-time-".concat(l)},z(u.hours,u.minutes))),i.push(r.a.createElement("div",{className:"num-table-col",key:"col-".concat(l)},f))}return r.a.createElement("div",{id:"display-flex",className:"margin-top-10px"},r.a.createElement("div",{className:"altidute-col",key:"alt-col"},o),r.a.createElement("div",{id:"holizontal-scroll",key:"data-cols"},i))},J=n(103),q=n(104),Y=n(100),$=n(101),X=function(e){var t={color:e.isTo?"#67c5ff":"#ff6e7a",border:e.isTo?"solid 2px #67c5ff":"solid 2px #ff6e7a"},n={fill:e.isTo?"#67c5ff":"#ff6e7a"};return r.a.createElement("button",{type:"button",onClick:e.onClick,className:"toggle-to-from",style:t},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",className:"svg-tofrom",style:n},r.a.createElement("g",null,r.a.createElement("rect",{fill:"none",height:"24",width:"24"})),r.a.createElement("g",null,r.a.createElement("g",null),r.a.createElement("g",null,r.a.createElement("path",{d:"M22,8l-4-4v3H3v2h15v3L22,8z"}),r.a.createElement("path",{d:"M2,16l4,4v-3h15v-2H6v-3L2,16z"})))),e.isTo?"\u3000To":" From")},Z=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.token&&0===this.props.dateInfoList.length&&this.props.handleOnLoadDates()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{dateInfoList:this.props.dateInfoList,onChange:this.props.handleOnChangeValue}),function(){if(e.props.selected)return r.a.createElement(J.a,{defaultActiveKey:"glaph",id:"uncontrolled-tab-example",className:"nav-justified"},r.a.createElement(q.a,{eventKey:"glaph",title:"Glaph",tabClassName:"my-tab"},r.a.createElement(Y.a,{className:"px-0",fluid:!0},r.a.createElement(A.a,null,r.a.createElement(R.a,{xs:12,sm:8,className:"px-0"},r.a.createElement(K,{windInfoList:e.props.selected.windInfoList,scaleRatio:e.props.scale,isTo:e.props.isTo}),r.a.createElement($.a,{vertical:!0,className:"myButtonClass"},r.a.createElement(M.a,{variant:"info",className:"rounded-circle pull-right center-block my-button",size:"sm",onClick:e.props.handleClickEnlargeButton},"\uff0b"),r.a.createElement(M.a,{variant:"info",className:"rounded-circle pull-right center-block my-button ",size:"sm",onClick:e.props.handleClickShrinkButton},"\u2212")),r.a.createElement(X,{isTo:e.props.isTo,onClick:e.props.handleClickToggleIsToButton})),r.a.createElement(V,{windInfoList:e.props.selected.windInfoList,onClickAt:e.props.handleOnSelectToggleButton})))),r.a.createElement(q.a,{eventKey:"table",title:"Table",tabClassName:"my-tab"},r.a.createElement(W,{windInfoList:e.props.selected.windInfoList}),r.a.createElement("div",{id:"centering"},r.a.createElement("h4",null,"\u80cc\u666f\u8272\u3068\u89d2\u5ea6\u306b\u3064\u3044\u3066\uff08\u5c11\u3057\u5de6\u306b\u305a\u308c\u3066\u308b\u306e\u3067\u4f5c\u308a\u76f4\u3057\uff09"),r.a.createElement("img",{src:n(91),className:"hsl-image"}))))}())}}]),a}(r.a.Component),ee=Object(s.c)((function(e){return{token:e.state.token,fetchingDates:e.state.fetchingDates,fetchingPibalData:e.state.fetchingPibalData,scale:e.state.scale,selected:e.state.selected,dateInfoList:e.state.dateInfoList,isTo:e.state.isTo}}),(function(e){return{handleClickEnlargeButton:function(){e(x())},handleClickShrinkButton:function(){e(y())},handleOnChangeValue:function(t){e(j(t))},handleOnSelectToggleButton:function(t){e(w(t))},handleOnLoadDates:function(){e(g())},handleClickToggleIsToButton:function(){e(S())}}}))(Z);function te(e){return e.getFullYear().toString()+"/"+("00"+e.getMonth()).slice(-2)+"/"+("00"+e.getDate()).slice(-2)}var ne=function(){return r.a.createElement(l.a,{history:H},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:F}),r.a.createElement(L,null,r.a.createElement(i.b,{exact:!0,path:"/",component:ee}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(23),re=n(72),ce=n(68),oe={token:"",creatingToken:!1,fetchingDates:!1,fetchingPibalData:!1,hasError:!1,scale:1,selected:void 0,dateInfoList:[],isTo:!0},se=Object(ce.reducerWithInitialState)(oe).case(g,(function(e){return Object(G.a)({},e,{fetchingDates:!0})})).case(T,(function(e){return Object(G.a)({},e,{fetchingDates:!1})})).case(k,(function(e){return Object(G.a)({},e,{fetchingPibalData:!0})})).case(x,(function(e){var t=Math.min(e.scale+.1,2);return Object(G.a)({},e,{scale:t})})).case(y,(function(e){var t=Math.max(e.scale-.1,.5);return Object(G.a)({},e,{scale:t})})).case(O,(function(e,t){return Object(G.a)({},e,{dateInfoList:t})})).case(I,(function(e,t){return Object(G.a)({},e,{selected:t,scale:1})})).case(w,(function(e,t){var n=e.selected;if(n){var a=!n.windInfoList[t].visible,r=n.windInfoList.map((function(e,n){return n===t?Object(G.a)({},e,{visible:a}):e})),c=Object(G.a)({},n,{windInfoList:r});return Object(G.a)({},e,{selected:c})}return e})).case(b,(function(e,t){return Object(G.a)({},e,{token:t})})).case(E,(function(e){return Object(G.a)({},e,{token:""})})).case(S,(function(e){var t=!e.isTo;return Object(G.a)({},e,{isTo:t})})).build(),ie=n(10),le=n.n(ie),ue=n(44),me=n(9);function fe(e,t){var n=JSON.stringify({postUser:e,postPass:t});return fetch("https://oval-silicon-280513.an.r.appspot.com/api/v1/authenticate",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"content-type":"application/json; charset=UTF-8"},body:n}).then((function(e){return e.json()})).then((function(e){return e.success?(localStorage.setItem("auth_token",e.token),{token:e.token}):{error:"such user is not exist"}})).catch((function(e){return{error:e}}))}function de(e){return fetch("https://oval-silicon-280513.an.r.appspot.com/api/v1/dates",{headers:{"x-access-token":e}}).then((function(e){return e.json()})).then((function(e){var t=e.data.map((function(e,t){return{id:t,date:he(e.date),timePeriod:e.timing}}));return t.sort((function(e,t){return t.date.getTime()-e.date.getTime()})),{dateList:t}})).catch((function(e){return{error:e}}))}function pe(e,t,n){var a=function(e){var t=e.getFullYear().toString(),n=("00"+e.getMonth()).slice(-2),a=("00"+e.getDate()).slice(-2);return t+n+a}(t);return fetch("https://oval-silicon-280513.an.r.appspot.com/api/v1/".concat(a,"/").concat(n),{headers:{"x-access-token":e}}).then((function(e){return e.json()})).then((function(e){if(e.data.length){var t=[];return e.data[0].infos.forEach((function(e){var n=e.hours,a=e.minutes,r=e.winds.map((function(e){return{alt:e.height,deg:e.degree,spd:e.speed}}));t.push({hours:n,minutes:a,winds:r,visible:!0})})),{windInfoList:t}}return{error:"no such data"}})).catch((function(e){return{error:e}}))}function he(e){var t=Number(e.slice(0,4)),n=Number(e.slice(4,6)),a=Number(e.slice(6));return new Date(t,n,a)}var be=function(e){return e.state.token},Ee=function(e){return e.state.dateInfoList},ve=le.a.mark(xe),ge=le.a.mark(ye),Te=le.a.mark(we),Oe=le.a.mark(je),ke=le.a.mark(Ie);function xe(){var e,t,n,a,r,c;return le.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(me.e)("START_CREATE_TOKEN");case 3:return e=o.sent,t=e.payload.username,n=e.payload.password,o.next=8,Object(me.a)(fe,t,n);case 8:if(a=o.sent,r=a.token,c=a.error,r||!c){o.next=18;break}return o.next=14,Object(me.c)({type:"FINISH_CREATE_TOKEN"});case 14:return localStorage.clear(),o.next=17,Object(me.c)({type:"REQUEST_LOGOUT"});case 17:return o.abrupt("continue",0);case 18:if(!r){o.next=23;break}return o.next=21,Object(me.c)({type:"REQUEST_LOGIN",payload:r});case 21:return o.next=23,Object(me.c)({type:"FINISH_CREATE_TOKEN"});case 23:o.next=0;break;case 25:case"end":return o.stop()}}),ve)}function ye(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(me.e)("FINISH_CREATE_TOKEN");case 3:return e.next=5,Object(me.c)(Object(ue.push)("/"));case 5:e.next=0;break;case 7:case"end":return e.stop()}}),ge)}function we(){var e,t,n,a;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(me.d)(be);case 2:return e=r.sent,r.next=5,Object(me.a)(de,e);case 5:if(t=r.sent,n=t.dateList,a=t.error,n||!a){r.next=16;break}return r.next=11,Object(me.c)({type:"FINISH_FETCH_DATES"});case 11:return localStorage.clear(),r.next=14,Object(me.c)({type:"REQUEST_LOGOUT"});case 14:return r.next=16,Object(me.c)(Object(ue.push)("/"));case 16:if(!n){r.next=23;break}return r.next=19,Object(me.c)({type:"SET_DATES",payload:n});case 19:return r.next=21,Object(me.c)({type:"FINISH_FETCH_DATES"});case 21:return r.next=23,Object(me.c)({type:"SELECT_FLIGHT",payload:0});case 23:case"end":return r.stop()}}),Te)}function je(){var e,t,n,a,r,c,o,s,i;return le.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=3,Object(me.e)("SELECT_FLIGHT");case 3:return e=l.sent,t=e.payload,l.next=7,Object(me.d)(be);case 7:return n=l.sent,l.next=10,Object(me.d)(Ee);case 10:return a=l.sent,r=a[t],l.next=14,Object(me.a)(pe,n,r.date,r.timePeriod);case 14:if(c=l.sent,o=c.windInfoList,s=c.error,o||!s){l.next=23;break}return localStorage.clear(),l.next=21,Object(me.c)({type:"REQUEST_LOGOUT"});case 21:return l.next=23,Object(me.c)(Object(ue.push)("/"));case 23:if(!o){l.next=27;break}return i={id:t,date:r.date,timePeriod:r.timePeriod,windInfoList:o},l.next=27,Object(me.c)({type:"SET_WIND",payload:i});case 27:l.next=0;break;case 29:case"end":return l.stop()}}),Oe)}function Ie(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.b)(xe);case 2:return e.next=4,Object(me.b)(ye);case 4:return e.next=6,Object(me.f)("START_FETCH_DATES",we);case 6:return e.next=8,Object(me.b)(je);case 8:case"end":return e.stop()}}),ke)}n(94);var Se=n(58);var Ne=function(e){var t=Object(re.a)(),n=[t,Object(Se.a)(H)],a=Object(ae.e)(Object(ae.c)({state:se,router:Object(l.b)(H)}),e,ae.a.apply(void 0,n));return t.run(Ie),a}();o.a.render(r.a.createElement(s.a,{store:Ne},r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[75,1,2]]]);
//# sourceMappingURL=main.4844477f.chunk.js.map